angular.module("ghiscoding.validation").service("validationService",["$timeout","validationCommon",function(e,o){function t(e,o){var t=this,n={};if("string"==typeof e&&"string"==typeof o?(n.elmName=e,n.rules=o):n=e,"object"!=typeof n||!n.hasOwnProperty("elmName")||!n.hasOwnProperty("rules")||!n.hasOwnProperty("scope")&&"undefined"==typeof t.validationAttrs.scope)throw"Angular-Validation-Service requires at least the following 3 attributes: {elmName, rules, scope}";return n.elm=angular.element(document.querySelector('[name="'+n.elmName+'"]:not([disabled]):not([ng-disabled]')),"object"!=typeof n.elm||0===n.elm.length?t:(n.elm.bind("blur",function(e){t.commonObj.initialize(n.scope,n.elm,n,n.ctrl),t.commonObj.typingLimit=0,r(t,e.target.value)}),n=l(t.validationAttrs,n),n.scope.$watch(n.elmName,function(e,o){return void 0===e&&void 0!==o?void t.commonObj.updateErrorMsg("INVALID_KEY_CHAR",!1,!0):(n.ctrl=angular.element(n.elm).controller("ngModel"),n.value=e,t.commonObj.initialize(n.scope,n.elm,n,n.ctrl),void r(t,e))},!0),t)}function n(e){var o=this;if(e instanceof Array)for(var t=0,n=e.length;n>t;t++)m(o,e[t]);else m(o,e)}function i(e){var o=this;return o.validationAttrs=e,o}function r(o,t){return o.commonObj.validate(t,!1),o.commonObj.isFieldRequired()||""!==t&&null!==t&&"undefined"!=typeof t?((o.commonObj.isFieldRequired()||t)&&o.commonObj.ctrl.$setValidity("validation",!1),"SELECT"===o.commonObj.elm.prop("tagName").toUpperCase()?(o.commonObj.ctrl.$setValidity("validation",o.commonObj.validate(t,!0)),t):("undefined"!=typeof t&&(o.commonObj.updateErrorMsg(""),e.cancel(o.timer),o.timer=e(function(){o.commonObj.scope.$evalAsync(o.commonObj.ctrl.$setValidity("validation",o.commonObj.validate(t,!0)))},o.commonObj.typingLimit)),t)):(a(o),t)}function a(o){e.cancel(self.timer),o.commonObj.updateErrorMsg(""),o.commonObj.ctrl.$setValidity("validation",!0),o.commonObj.elm.unbind("blur")}function l(e,o){var t={};for(var n in e)t[n]=e[n];for(var n in o)t[n]=o[n];return t}function m(e,o){if("undefined"!=typeof e.commonObj.scope){var t=e.commonObj.scope.$watch(o,function(){});t();var n=angular.element(document.querySelector('[name="'+o+'"]'));n.unbind("blur")}}var c=function(){this.validationAttrs={},this.commonObj=new o};return c.prototype.addValidator=t,c.prototype.removeValidator=n,c.prototype.setGlobalOptions=i,c}]);